<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Smartphone Deals</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 text-gray-800">

  <!-- Header -->
  <header class="bg-white shadow-sm fixed top-0 left-0 right-0 z-50">
    <div class="max-w-6xl mx-auto px-4 py-3 flex items-center justify-between">
      <h1 class="text-xl font-bold text-indigo-600">ðŸ“± SmartDeals</h1>

      <!-- Desktop Menu -->
      <nav class="hidden md:flex space-x-6">
        <a href="index.html" class="bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700">Home</a>
        <a href="#" class="hover:text-indigo-600 font-medium">About</a>
        <a href="#" class="hover:text-indigo-600 font-medium">Contact</a>
        <a href="admin.html" class="hover:text-indigo-600 font-medium">Admin</a>
      </nav>

      <!-- Mobile Menu Button -->
      <button id="menu-btn" class="md:hidden text-2xl focus:outline-none">â˜°</button>
    </div>

    <!-- Mobile Menu -->
    <div id="menu" class="hidden bg-white border-t md:hidden">
      <a href="#" class="block px-4 py-2 hover:bg-indigo-50">Home</a>
      <a href="#" class="block px-4 py-2 hover:bg-indigo-50">About</a>
      <a href="#" class="block px-4 py-2 hover:bg-indigo-50">Contact</a>
      <a href="admin.html" class="block px-4 py-2 bg-indigo-600 text-white hover:bg-indigo-700">Admin</a>
    </div>
  </header>

  <!-- Content -->
  <main class="pt-24 max-w-6xl mx-auto px-4">
    <h2 class="text-2xl font-bold mb-4">Available Deals</h2>
    <div id="cards" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">

      <!-- Example Product Card -->
      <div class="bg-white rounded-xl shadow-md overflow-hidden hover:shadow-lg transition">
        <img src="https://via.placeholder.com/400x250" alt="Phone" class="w-full h-48 object-cover">
        <div class="p-4">
          <h3 class="text-lg font-semibold">Oppo K13x</h3>
          <p class="text-sm text-gray-500">6GB / 128GB</p>
          <p class="mt-2 text-sm">Commission: <span class="font-medium text-green-600">â‚¹300</span></p>
          <p class="text-sm">Quantity Left: <span class="font-medium">5</span></p>
          <button class="show-deal w-full bg-indigo-600 text-white mt-3 py-2 rounded-md hover:bg-indigo-700">
            Show Deal
          </button>
        </div>
      </div>

    </div>
  </main>

  <!-- Popup Modal -->
  <div id="dealModal" class="hidden fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50">
    <div class="bg-white rounded-lg shadow-xl w-11/12 sm:w-2/3 lg:w-1/2 p-6 relative">
      <button id="closeModal" class="absolute top-3 right-3 text-gray-500 hover:text-red-500 text-2xl">&times;</button>

      <!-- Step 1: Deal Details -->
      <div id="dealDetails">
        <h3 class="text-xl font-bold mb-3">Oppo K13x (6/128)</h3>
        <p><b>Booking Amount:</b> â‚¹500</p>
        <p><b>Commission:</b> â‚¹300</p>
        <p><b>Return Amount:</b> â‚¹700</p>
        <p class="mt-2"><b>Address:</b><br>House No. 12, Lotus Apartment, Kozhikode - 673001</p>
        <p class="mt-2"><b>Product Link:</b> <a href="https://amazon.in" target="_blank" class="text-indigo-600 underline">View on Amazon</a></p>

        <button id="confirmDeal" class="w-full mt-5 bg-green-600 text-white py-2 rounded-md hover:bg-green-700">
          Confirm Deal
        </button>
      </div>

      <!-- Step 2: User Form -->
      <div id="confirmForm" class="hidden">
        <div class="flex items-center justify-between mb-3">
          <h3 class="text-lg font-bold">Confirm Your Booking</h3>
          <p id="timer" class="text-red-600 font-semibold">10:00</p>
        </div>

        <form id="dealForm" class="space-y-3">
          <input type="text" placeholder="Name (as in address)" class="w-full border rounded-md p-2" required>
          <input type="text" placeholder="Mobile Number" class="w-full border rounded-md p-2" required>
          <input type="date" placeholder="Expected Delivery Date" class="w-full border rounded-md p-2" required>
          <input type="text" placeholder="UPI ID" class="w-full border rounded-md p-2" required>
          <button type="submit" class="w-full bg-indigo-600 text-white py-2 rounded-md hover:bg-indigo-700">
            Submit Deal
          </button>
        </form>
      </div>
    </div>
  </div>

  <script>
    const menuBtn = document.getElementById("menu-btn");
    const menu = document.getElementById("menu");
    const showDealBtns = document.querySelectorAll(".show-deal");
    const dealModal = document.getElementById("dealModal");
    const closeModal = document.getElementById("closeModal");
    const confirmDeal = document.getElementById("confirmDeal");
    const dealDetails = document.getElementById("dealDetails");
    const confirmForm = document.getElementById("confirmForm");
    const timerDisplay = document.getElementById("timer");
    const form = document.getElementById("dealForm");
    let timerInterval;

    menuBtn.addEventListener("click", () => menu.classList.toggle("hidden"));

    showDealBtns.forEach(btn => {
      btn.addEventListener("click", () => {
        dealModal.classList.remove("hidden");
        dealDetails.classList.remove("hidden");
        confirmForm.classList.add("hidden");
      });
    });

    closeModal.addEventListener("click", () => {
      dealModal.classList.add("hidden");
      clearInterval(timerInterval);
    });

    confirmDeal.addEventListener("click", () => {
      dealDetails.classList.add("hidden");
      confirmForm.classList.remove("hidden");
      startTimer(10); // 10-minute countdown
    });

    function startTimer(minutes) {
      let time = minutes * 60;
      clearInterval(timerInterval);

      timerInterval = setInterval(() => {
        const min = Math.floor(time / 60);
        const sec = time % 60;
        timerDisplay.textContent = `${min}:${sec < 10 ? '0' : ''}${sec}`;
        time--;

        if (time < 0) {
          clearInterval(timerInterval);
          dealModal.classList.add("hidden");
          alert("â° Time expired! Please reopen the deal to try again.");
        }
      }, 1000);
    }

    form.addEventListener("submit", (e) => {
      e.preventDefault();
      clearInterval(timerInterval);
      alert("âœ… Deal submitted successfully!");
      dealModal.classList.add("hidden");
    });
  </script>
</body>
</html>
